<!DOCTYPE html>
<html lang="en-US" class="glue-flexbox">
  <head>
    <title>AIP-2715: Documenting authorization changes</title>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link href="//fonts.googleapis.com/css?family=Roboto:100,300,400,500,700|Google+Sans:400,500|Product+Sans:400&amp;lang=en" rel="stylesheet"></link>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" type="text/css" media="screen" href="//www.gstatic.com/glue/v22_1/glue.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=6e88be9c">
    <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css?v=6e88be9c">
    <script type="text/javascript" src="//code.jquery.com/jquery-3.4.0.min.js"></script>
    <script type="text/javascript" src="//www.gstatic.com/glue/latest/glue-detect.min.js"></script>
    <script type="text/javascript">
      $('html').css('visibility', 'hidden');
      $.when($.ready).then(() => {
        $('html').css('visibility', 'visible');
      });
    </script>
    <script type="text/javascript" src="/assets/js/global.js?v=6e88be9c"></script>
    
<script type="text/javascript" src="/assets/js/syntax.js"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140054909-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-140054909-1');
    </script>
  </head>
  <body>
    <!-- prettier-ignore -->
<header class="glue-header glue-header--single">
  <div class="glue-header__bar glue-header__bar--desktop glue-header__drawer">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                <use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>
                </svg>
              </div>
              <p class="glue-header__logo--product">AIPs</p>
            </a>
          </div>
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- LINK BAR-->
      <div class="glue-header__container glue-header__container--flex-auto">
        <nav class="glue-header__link-bar">
          <ul id="list-1" class="glue-header__list">
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/general" aria-level="1">Browse AIPs</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/news" aria-level="1">News</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/faq" aria-level="1">FAQ</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/contributing" aria-level="1">Contributing</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="https://linter.aip.dev/" target="_blank" aria-level="1">
                    API Linter
                    <svg role="img" class="glue-icon glue-icon--18px">
                      <use xlink:href="/assets/images/glue-icons.svg#open-in-new"></use>
                    </svg>
                  </a>
                </li>
              
            
          </ul>
        </nav>
      </div>
      <!-- CTA-->
      <div class="glue-header__container glue-header__container--cta">
        <div class="glue-header__cta">
        <div class="glue-sitesearch">
          <form method="GET" action="/search">
          <label for="q">Search this site</label>
          <input class="glue-sitesearch__input" type="text" name="q" id="q"
            placeholder="Search AIPs">
          <button type="submit" class="glue-button glue-sitesearch__submit" title="Submit">
            <svg role="img" class="glue-icon glue-icon--24px">
            <use xlink:href="/assets/images/glue-icons.svg#search"></use>
            </svg>
          </button>
          </form>
        </div>
        <a href="https://github.com/aip-dev/google.aip.dev" target="_blank" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile header placeholder -->
  <div class="glue-header__bar glue-header__bar--mobile">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__hamburger glue-header__hamburger--first-tier">
            <div class="glue-header__hamburger-wrapper">
              <button type="button" class="glue-header__drawer-toggle-btn"
                aria-controls="drawer" aria-expanded="false" aria-label="Open the navigation drawer">
                <svg role="img" class="glue-icon glue-icon--24px"><use xlink:href="/assets/images/glue-icons.svg#menu"></use></svg>
              </button>
            </div>
          </div>
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                  <use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>
                </svg>
              </div>
              <p class="glue-header__logo--product">AIPs</p>
            </a>
          </div>
          <!-- SKIP -->
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- CTA -->
      <div class="glue-header__container">
        <div class="glue-header__cta">
        <a href="https://github.com/aip-dev/google.aip.dev" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <div class="glue-header__drawer-backdrop"></div>
</header>
    <div class="glue-page">
      
      <main role="main" id="page-content">
        
<nav id="aip-nav" class="docs-component-nav">
  <ul class="nav-list">
    <li class="nav-item nav-item-header">AIPs by Scope</li>
    <li class="nav-item">
      <a href="/general">General</a>
    </li>
    <li class="nav-item">
      <a href="/cloud">Google Cloud Platform</a>
    </li>
    <li class="nav-item">
      <a href="/auth">Auth</a>
    </li>
    <li class="nav-item">
      <a href="/client-libraries">Client libraries</a>
    </li>
    <li class="nav-item">
      <a href="/apps">GSuite</a>
    </li>
    <li class="nav-item">
      <a href="/aog">Actions on Google</a>
    </li>
    <li class="nav-item nav-item-header">AIPs</li>
    <li class="nav-item">
      <a href="/2712">
        <span class="aip-number">2712</span>
        API completeness
      </a>
    </li>
    <li class="nav-item">
      <a href="/2713">
        <span class="aip-number">2713</span>
        One team owns each type
      </a>
    </li>
    <li class="nav-item nav-item-active">
      <a href="/2715">
        <span class="aip-number">2715</span>
        Documenting authorization changes
      </a>
    </li>
    <li class="nav-item">
      <a href="/2716">
        <span class="aip-number">2716</span>
        Standard terms in names
      </a>
    </li>
    <li class="nav-item">
      <a href="/2717">
        <span class="aip-number">2717</span>
        Patterns for generic fields
      </a>
    </li>
    <li class="nav-item">
      <a href="/2718">
        <span class="aip-number">2718</span>
        References to objects in other APIs
      </a>
    </li>
    </ul>
</nav>
<section id="jump-content">
          
<aside id="aip-sidebar" class="docs-component-sidebar">
  <table id="aip-summary">
    <tr><th colspan="2">Documenting authorization changes</th></tr>
    <tr><td>Number</td><td>2715</td></tr>
    <tr><td>Permalink</td><td><a href="https://google.aip.dev/apps/2715">google.aip.dev/apps/2715</a></td></tr>
    <tr><td>Scope</td><td>GSuite</td></tr>
    <tr><td>State</td><td>Reviewing</td></tr>
    <tr><td>Created</td><td>2018-09-10</td></tr>
    <tr><td>Updated</td><td>2018-09-10</td></tr>
  </table>

  <section id="aip-toc" class="docs-component-sidebar-toc">
    <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#definitions">Definitions</a></li>
<li><a href="#guidance">Guidance</a></li>
</ul>
</div>

  </section>

  <section class="docs-component-sidebar-actions">
    <ul>
      <li><a href="https://github.com/aip-dev/google.aip.dev/issues/">File Bug</a></li>
      <li><a href="https://github.com/aip-dev/google.aip.dev/blob/master/aip/apps/2715.md">View source</a></li>
      <li><a href="https://github.com/aip-dev/google.aip.dev/edit/master/aip/apps/2715.md">Edit this page</a></li>
    </ul>
  </section>
</aside>
<section id="aip-main" class="docs-component-main">
  <section class="section-breadcrumbs">
  <nav
    class="glue-breadcrumbs glue-mod-mt-std glue-mod-mb-std"
    aria-label="You are here."
  >
    <ol class="glue-breadcrumbs__list aip-breadcrumbs">
      <li class="glue-breadcrumbs__item" aria-level="1">
        <a class="glue-breadcrumbs__link" href="/">
          API Improvement Proposals
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item" aria-level="2">
        <a class="glue-breadcrumbs__link" href="/apps">
          GSuite AIPs
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item glue-breadcrumbs__item--active"
          aria-level="3">
        Documenting authorization changes
      </li>
    </ol>
  </nav>
</section>
  <p id="aip-state-banner" class="callout note">
  This AIP is currently under review. This means that the editors have read it
  and are in high-level concurrence, and while it is not yet fully approved, we
  have a good faith expectation that the AIP will be approved in something
  close to its current state.
</p>
  <h4 class="aip-number">AIP-2715</h4>
  <h1 id="documenting-authorization-changes">Documenting authorization changes</h1>
<p>Authorization is critical to manage well. Understanding an API includes
understanding not only what operations do, but when one is allowed to do them.
Authorization changes, either new authorization constructs or new uses of
existing authorization constructs, should be easy to find in a design rather
than scattered through the document in individual sections.</p>
<p>In order to make it easy to see what (if any) authorization constructs are
being modified in your design, we want to be able to find them in a single,
clear place.</p>
<p><strong>Note:</strong> This is <em>not</em> talking about RPC-level permissions, like those covered
by <code>RpcSecurityPolicy</code>, but about authorization constructs used by your API for
its own purposes.</p>
<h2 id="definitions">Definitions</h2>
<p>There are a couple of common types of authorization construct:</p>
<p>A <strong>role</strong> refers to an authorization construct which is granted to an
<em>identity</em> or an <em>identity group</em> on a <em>resource</em>. The most well known examples
of roles in G Suite are the <code>commenter</code>, <code>reader</code>, <code>writer</code>, and <code>owner</code> roles
from Drive.</p>
<p>A <strong>permission</strong> refers to an authorization construct which is used to check
whether a particular <em>identity</em> can execute some <em>operation</em>. For example, to
check whether the current user can delete a file, the application may check
whether the user has the <code>file.delete</code> permission on the file. Permissions are
most often assigned to roles, so that only roles are granted to identities or
identity groups, but some systems allow permissions to be granted directly.
Applications often only use each permission to authorize a single operation on
a resource, but there are cases where an application may use a permission to
authorize multiple different operations.</p>
<p>Within an application, authorization checks are made using only one of these
authorization constructs (typically permissions, if the application has that
concept). For example, in order to determine if a user can read a document, an
application would <em>either</em> check whether the user has a <code>doc.read</code> permission
<em>or</em> has the <code>reader</code> role, but not both.</p>
<h2 id="guidance">Guidance</h2>
<p>If your design creates new authorization constructs or extends/modifies the use
of any existing authorization constructs, you <strong>must</strong> have a separate section
in your design document that describes this. You <strong>may</strong> additionally discuss
these in any other place in your document.</p>
<p>It is not important whether this is a top-level section or subsection. It is
important that all such changes are listed together in a distinct section so
they are easy to find and analyze.</p>
<p>If the identifier of an authorization construct that is new or modified is
visible to users or developers, the way that it is identified should also be in
your document. Examples of this are:</p>
<ul>
<li>If access is granted using roles and a new role is being added, the way that
  the role is identified in the role granting RPCs should be in your document.</li>
<li>If there is an API that allows permissions assigned to roles to be
  manipulated, the way that the permission is identified in the role
  manipulation RPCs should be in your document.</li>
</ul>
  <footer>
  Except as otherwise noted, the content of this page is licensed under the
  <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
  Attribution 4.0 License</a>, and code samples are licensed under the
  <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
  <span class="no-print">For details, see <a href="/licensing">content
  licensing</a>.</span>
</footer>
</section>

        </section>
      </main>
      
    </div>
    <script src="//www.gstatic.com/external_hosted/hammerjs/v2_0_2/hammer.min.js"></script>
    <script src="//www.gstatic.com/glue/v22_1/glue-vanilla.min.js"></script>
    <script type="text/javascript">
      const headerElement = document.querySelector('.glue-header');
      if (headerElement) {
        new window.glue.ui.header.Header(headerElement);
      }
    </script>
  </body>
</html>