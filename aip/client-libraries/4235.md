---
id: 4235
state: draft
created: 2024-02-15
---

# Automatically populate fields in the request message

For APIs that leverage request idempotency as described via [AIP-155], it could
be useful to have the client libraries autogenerate the `request_id` if it is
not already set by the customer.

**Note:** This feature is primarily written for `request_id` fields within the
request message. However, this feature should work for a field of any name, as
long as the below conditions hold true.

## Guidance

APIs **may** configure fields in the request message for automatic population.

For a field to be automatically populated, the below configurations **must** be
true:

- The field **must** exist as a top-level string field of a unary method's
  request message (e.g. nested fields will not be eligible for automatic
  population).
- The unary method which has the field in the request message **must** be
  explicitly designated
  in [google.api.client.Publishing.method_settings.selector] using the fully
  qualified name of the method.
- The field **must** *not* be annotated
  with [google.api.field_behavior = REQUIRED].
- The field name **must** be listed
  in [google.api.client.Publishing.method_settings.auto_populated_fields].
- The field **must** be annotated with [google.api.field_info.format = UUID4].

**Note:** This feature currently only supports automatic population of string
UUID4 values. It may be expanded in the future to support other format types.

### Generator configuration

Client library generators **should** enable automatic population of request
fields at the time of sending the request in the specified format if the above
configurations are true.
If a field is not configured as above, *or* it is set in the request by the
customer,
then the field **must not** be automatically populated.

**If** a client library generator supports automatic population of request
fields, then those automatically populated fields **must** be reused for retries
of the same request.

As of February 15, 2024, this feature is supported in the Node and Java client
library generators.

[AIP-155]: https://google.aip.dev/155

[google.api.client.Publishing.method_settings.selector]: https://github.com/googleapis/googleapis/blob/master/google/api/client.proto

[google.api.client.Publishing.method_settings.auto_populated_fields]: https://github.com/googleapis/googleapis/blob/master/google/api/client.proto

[google.api.field_info.format = UUID4]: https://github.com/googleapis/googleapis/blob/master/google/api/field_info.proto

[google.api.field_behavior = REQUIRED]: https://github.com/googleapis/googleapis/blob/master/google/api/field_behavior.proto